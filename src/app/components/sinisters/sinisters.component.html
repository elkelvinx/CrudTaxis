<!DOCTYPE html>
<main>
  <div class="ContainerDivs">
    <!-- Card de formulario -->
    <div class="CardSerch">
      <!-- Header -->
      <div class="headerCard">
        Siniestros
        <mat-icon (click)="formatearInput()" class="button-search">
          add_circle_outline
        </mat-icon>
      </div>

      <!-- Body -->
      <div class="bodyCard">
        <!-- Número económico / Aseguradora / Tipo de seguro -->
        <div class="renglon">
          <app-auto-complete
            class="input-small"
            [text]="'Número económico'"
            [info]="sinister.ecoNumber"
            [arrays]="idUnits"
            (data)="guardarDefault($event,unitIdList,'idUnit')"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-third"
            [text]="'Aseguradora'"
            [info]="sinister.insuranceS"
            [arrays]="insuranceName"
            (data)="guardarDefault($event,insurances,'insurance')"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-third"
            [text]="'Tipo de seguro'"
            [info]="sinister.typeInsurance"
            [arrays]="arrays.typeInsurance"
            (data)="guardarDefault($event,sinistersWithID.typeInsurance,'typeInsurance')"
          >
          </app-auto-complete>
        </div>

        <!-- Otro afectado / Mecánico -->
        <div class="renglon">
          <app-auto-complete
            class="input-half"
            [text]="'Nombre del otro afectado'"
            [info]="sinister.crashCounterPart"
            (data)="sinister.crashCounterPart = $event"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-half"
            [text]="'Mecánico'"
            [info]="sinister.workShop"
            (data)="sinister.workShop = $event"
          >
          </app-auto-complete>
        </div>

        <!-- Administrador / Conductor -->
        <div class="renglon">
          <app-auto-complete
            class="input-half"
            [text]="'Administrador'"
            [info]="sinister.adminS"
            [arrays]="adminsName"
            (data)="guardarAdmin($event)"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-half"
            [text]="'Conductor'"
            [info]="sinister.driverS"
            [arrays]="driverName"
            (data)="guardarDefault($event,drivers,'driver')"
          >
          </app-auto-complete>
        </div>

        <!-- Tipo siniestro / Colonia -->
        <div class="renglon">
          <app-auto-complete
            class="input-half"
            [text]="'Tipo de siniestro'"
            [info]="sinister.typeSinisterS"
            [arrays]="typeSinisterName"
            (data)="guardarDefault($event,typeSinister,'typeSinister')"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-half"
            [text]="'Colonia'"
            [info]="sinister.settlementS"
            [arrays]="settlementName"
            (data)="guardarDireccion($event)"
          >
          </app-auto-complete>
        </div>

        <!-- Calles -->
        <div class="renglon">
          <app-auto-complete
            class="input-third"
            [text]="'Calle principal'"
            [info]="sinister.street1"
            [arrays]="streetName"
            (data)="guardarStreet($event, 1)"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-third"
            [text]="'Entre la calle'"
            [info]="sinister.street2"
            [arrays]="streetName"
            (data)="guardarStreet($event, 2)"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-third"
            [text]="'y la Calle'"
            [info]="sinister.street3"
            [arrays]="streetName"
            (data)="guardarStreet($event, 3)"
          >
          </app-auto-complete>
        </div>

        <!-- Ganado o Perdido / Aplicación seguro / Persona involucrada -->
        <div class="renglon">
          <app-auto-complete
            class="input-third"
            [text]="'Ganado o Perdido'"
            [info]="sinister.winOrLooseS"
            [arrays]="arrays.winOrLoose"
            (data)="guardarDefault($event,sinistersWithID.winOrLoose,'winOrLoose')"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-third"
            [text]="'Aplicación de seguro'"
            [info]="sinister.insuranceAplicationS"
            [arrays]="arrays.insuranceAplication"
            (data)="guardarDefault($event,sinistersWithID.insuranceAplication,'insuranceAplication')"
          >
          </app-auto-complete>

          <app-auto-complete
            class="input-third"
            [text]="'Conductor o Administrador'"
            [info]="sinister.personInvolvedS"
            [arrays]="arrays.personInvolvedName"
            (data)="guardarDefault($event,sinistersWithID.personInvolvedName,'personInvolved')"
          >
          </app-auto-complete>
        </div>

        <!-- Fecha evento -->
        <div class="renglon">
          <app-datepicker-date
            class="input-half"
            [isDisabled]="false"
            [actualDate]="sinister.dateEvent"
            (date)="sinister.dateEvent = $event"
            [text]="'Fecha del evento'"
          >
          </app-datepicker-date>

          <mat-form-field class="input-half">
            <mat-label>Observaciones del choque</mat-label>
            <textarea matInput [(ngModel)]="sinister.observations"> </textarea>
          </mat-form-field>
        </div>
      </div>

      <!-- Footer -->
      <div class="footerCard">
        <mat-divider></mat-divider>
        <mat-card-actions class="actions">
          <button
            mat-raised-button
            (click)="ActSave ? grabar() : actualizar()"
            color="primary"
            class="text-button-greenFinal"
          >
            {{ ActSave ? "Guardar" : "Actualizar" }}
          </button>

          <app-yes-no-dialog
            variant="danger"
            (data)="onDelete(sinister)"
            [text]="'¿Deseas borrar el registro del siniestro?'"
            [name]="sinister.ecoNumber || 'sin número'"
            [IconButton]="false"
          >
          </app-yes-no-dialog>
        </mat-card-actions>
      </div>
    </div>

    <!-- Tabla -->
    <div class="div-table">
      <div class="tabla-dataPRUEBA">
        <app-table
          [data]="listSinisters"
          [columns]="tableColumns.columns"
          [config]="tableConfig"
          (action)="onTableAction($event)"
        >
        </app-table>
      </div>
    </div>
  </div>
</main>
